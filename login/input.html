<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
    <title>GHH | Signup-2</title>

</head>

<body>
    <h1 align = "center">회원가입</h1>
    <header>
        <div class="circle">
            1. 본인인증
        </div>
        <div class="circle" id="now">
            2. 정보입력
        </div>
        <div class="circle">
            3. 가입완료
        </div>
    </header>
    <form onsubmit="return checkz()" action="done.html" method="post" enctype="text/plain" >
        <div class="main">
            <br>
            이름: <input type="text" name="name" id="name">
            <br><br>
            닉네임: <input type="text" name="nickname" id="nick">
            <br><br>
            아이디: <input type="text" name="id" maxlength="12" id="tbID" > 4~12자리의 영문 대소문자와 숫자로만 입력
            <br><br>
            비밀번호: <input type="password" maxlength="12" id="tbPwd" > 4~12자리의 영문 대소문자와 숫자로만 입력
            <br><br>
            비밀번호 확인: <input type="password" id="cpass" maxlength="12">
            <br><br>
            이메일: <input type="text" name="addr" id="mail"> 예)id@domain.com
            <br><br>
        </div>
        <button type="submit" class="button" name="button">다음 단계 →</button>
    </form>
    
    <!-- Optional JavaScript; choose one of the two! -->
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script language="javascript">
        function checkz()
        {
            var idtext = document.getElementById("tbID");
            var patext = document.getElementById("tbPwd");
            var cpatext = document.getElementById("cpass");
            var mtext = document.getElementById("mail");
            var nametext = document.getElementById("name");
            var nicktext = document.getElementById("nick");

            var id = idtext.value;
            var password = patext.value;
            var cpassword = cpatext.value;
            var mail = mtext.value;
            var name = nametext.value;
            var nick = nicktext.value;

            var regExp1 = /^[a-zA-Z0-9]{4,12}$/;
            //id와 비밀번호의 유효성 검사
            var regExp2 = /[a-z0-9]{2,}@[a-z0-9-]{2,}\.[a-z0-9]{2,}/i;
            //e-mail의 유효성 검사
            var regname = /^[가-힝]{2,}$/;
            //이름의 유효성 검사

            if (!regname.test(nametext.value)){
                alert("이름을 올바르게 입력해주세요.");
                nametext.value = "";
                nametext.focus();
                return false;
            }
            
            if (nicktext.value == ""){
                alert("닉네임을 입력해주세요");
                nicktext.value = "";
                nicktext.focus();
                return false;
            }
            
            if (!regExp1.test(idtext.value)) {
                alert("형식에 맞춰서 ID를 입력해주세요.");
                idtext.value="";
                idtext.focus();
                return false;
            }
            
            if (!regExp1.test(patext.value)) {
                alert("형식에 맞춰서 PW를 입력해주세요.");
                patext.value="";
                patext.focus();
                return false;
            }
            
            if (!(cpassword.slice(0, cpassword.length) === password.slice(0, password.length))){
                alert("비밀번호가 일치하지 않습니다.");
                cpatext.value = "";
                cpatext.focus();
                return false;
            }
            
            if ((cpassword.slice(0, cpassword.length) === id.slice(0, id.length))){
                alert("비밀번호는 ID와 같을 수 없습니다.");
                patext.value = "";
                patext.focus();
                cpatext.value = "";
                cpatext.focus();
                return false;
            }
            
            if (!regExp2.test(mtext.value)){
                alert("형식에 맞춰서 이메일을 입력해주세요.");
                mtext.value = "";
                mtext.focus();
                return false;
            }
            window.localStorage.setItem('id', id);
            window.localStorage.setItem('pwd', password);
            window.localStorage.setItem('point', 0);
            return true;
        }
    </script>
</body>
</html>
